<ion-content>
  <div class="row mt-3 ms-2 me-4">
    <div class="col-8">
      <!-- <ion-icon name="arrow-back-outline" size="medium" (click)="onClickBackBtn()" style="font-size: 30px;"></ion-icon> -->
      <!-- <a href="#" class="back-button" (click)="onClickBackBtn()">Back</a> -->
      <ion-icon name="arrow-back-circle" style="font-size: 30px;" (click)="onClickBackBtn()"></ion-icon>
    </div>
    <!-- <div class="col-2"></div> -->
    <!-- <div class="col-2" style="text-align: right;">
      <ion-icon name="moon" style="font-size: 30px;"></ion-icon>
    </div> -->
    <div class="col-3" (click)="onClickCartPage()" style="font-size: 30px; text-align: right;">
      <!-- <img width="40" height="40" src="https://img.icons8.com/ultraviolet/40/shopping-cart.png" alt="shopping-cart"/> -->
      <ion-icon name="cart" size="medium"></ion-icon>
    </div>
    <div class="col-1" (click)="onClickProfileSection()" style="font-size: 30px; text-align: right;">
      <!-- <img width="48" height="48" src="https://img.icons8.com/color/48/circled-user-male-skin-type-7--v1.png" alt="circled-user-male-skin-type-7--v1" (click)="onClickProfileSection()"/> -->
      <ion-icon name="person-circle" size="large"></ion-icon>
    </div>
  </div>

  <div class="row">
    <div class="col-12 text-center">
      <p class="book-title mt-3 mb-2">{{ this.bookInfo.categoryName }}</p>
    </div>
  </div>

  <div class="row mt-4 ms-3 me-3">
    <div class="col-12 d-flex justify-content-center">
      <ion-img src="../../../../assets/book-covers/1.png"
        style="width: 80%; box-shadow: rgba(0, 0, 0, 0.4) 0px 2px 4px, rgba(0, 0, 0, 0.3) 0px 7px 13px -3px, rgba(0, 0, 0, 0.2) 0px -3px 0px inset;"></ion-img>
    </div>
    <div class="col-12 mt-3">
      <p class="book-title text-center">{{ this.bookInfo.bookName }}</p>
      <p class="book-author text-center" style="margin-top: -15px;">{{ this.bookInfo.authorName }}</p>
    </div>
    <div class="col-12">
      <p style="text-align: justify;">
        {{ this.bookInfo.bookDescription }}
      </p>
    </div>
  </div>

  <div class="row mt-3 ms-3" *ngIf="!this.bookBuyStatus">
    <div class="col-6">
      <button class="add-to-cart-btn" (click)="onClickAddItemsToCart()">Add to Cart</button>
    </div>
    <div class="col-6">
      <button class="buy-now-btn" style="width: 80%;" (click)="onClickBuyBookBtn()">Buy Now</button>
    </div>
  </div>

  <div class="row mt-3" *ngIf="this.bookBuyStatus">
    <div class="col-12 text-center">
      <button class="buy-now-btn" (click)="readBook()">Read Book</button>
    </div>
  </div>

  <div class=" mt-3 ms-3 me-3">
    <div class="col-12">
      <ion-accordion-group>
        <ion-accordion value="first" style="border-radius: 10px;">
          <ion-item slot="header" color="light">
            <ion-label class="u-r">Submit a review for this book</ion-label>
          </ion-item>
          <div class="ion-padding" slot="content">
            <form [formGroup]="this.ratingForm" (submit)="onSubmitClientReview()">
              <div class="row">
                <div class="col-12" style="display: flex; align-items: center; justify-content: center;" id="star-rating">
                  <ngx-star-rating formControlName="rating" [id]="'rating'"></ngx-star-rating>
                  <!-- <star-rating value="5" totalstars="5" checkedcolor="red" uncheckedcolor="black" size="24px" readonly="false" (rate)="onRate($event)"></star-rating> -->
                </div>
                <div class="col-12 mt-3">
                  <textarea name="" class="form-control text-inout" placeholder="Type Your Feedback" cols="30" rows="5"
                    formControlName="feedback"></textarea>
                </div>
                <div class="col-12 mt-3 text-center">
                  <button class="rv-btn">Submit Review</button>
                </div>
              </div>

              <!-- <p>form is valid: {{ ratingForm.valid ? 'true' : 'false' }}</p> -->

            </form>
          </div>
        </ion-accordion>
      </ion-accordion-group>
    </div>
  </div>

  <div class="row mt-5 ms-3 me-3">
    <div class="col-12">
      <p class="u-r-txt">User Reviews â€¦</p>
    </div>
    <div class="col-12" style="max-height: 200px;">
      <div *ngFor="let eachFeedback of this.feedBackList" class="card mb-3"
        style="box-shadow: rgba(0, 0, 0, 0.15) 0px 2px 8px;">
        <div class="row mt-2">
          <div class="col-12 ms-2">
            <div class="row">
              <div class="col-6" *ngIf="eachFeedback.rating == 1">
                <img src="../../../../assets/icon/star.png" style="width: 20px; height: 20px;" alt="">
              </div>
              <div class="col-6" *ngIf="eachFeedback.rating == 2">
                <img src="../../../../assets/icon/star.png" style="width: 20px; height: 20px;" alt="">
                <img src="../../../../assets/icon/star.png" style="width: 20px; height: 20px;" alt="">
              </div>
              <div class="col-6" *ngIf="eachFeedback.rating == 3">
                <img src="../../../../assets/icon/star.png" style="width: 20px; height: 20px;" alt="">
                <img src="../../../../assets/icon/star.png" style="width: 20px; height: 20px;" alt="">
                <img src="../../../../assets/icon/star.png" style="width: 20px; height: 20px;" alt="">
              </div>
              <div class="col-6" *ngIf="eachFeedback.rating == 4">
                <img src="../../../../assets/icon/star.png" style="width: 20px; height: 20px;" alt="">
                <img src="../../../../assets/icon/star.png" style="width: 20px; height: 20px;" alt="">
                <img src="../../../../assets/icon/star.png" style="width: 20px; height: 20px;" alt="">
                <img src="../../../../assets/icon/star.png" style="width: 20px; height: 20px;" alt="">
              </div>
              <div class="col-6" *ngIf="eachFeedback.rating == 5">
                <img src="../../../../assets/icon/star.png" style="width: 20px; height: 20px;" alt="">
                <img src="../../../../assets/icon/star.png" style="width: 20px; height: 20px;" alt="">
                <img src="../../../../assets/icon/star.png" style="width: 20px; height: 20px;" alt="">
                <img src="../../../../assets/icon/star.png" style="width: 20px; height: 20px;" alt="">
                <img src="../../../../assets/icon/star.png" style="width: 20px; height: 20px;" alt="">
              </div>
              <div class="col-6">
                <p class="chapter-count" style="float: right;">{{ eachFeedback.time | date: "MMM dd, yyyy" }}</p>
              </div>

              <p class="book-title">{{ eachFeedback.feedback }}</p>
              <p style="margin-top: -10px;">{{ eachFeedback.firstName }} {{ eachFeedback.lastName }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ion-content>